<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Loja</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<!-- CABE√áALHO -->
<header class="cabecalho">
  <div class="cabecalho-conteudo">
    <!-- Logo -->
    <div class="logo-container">
      <img src="logo.svg" alt="Logo Pet Dudis" class="logo">
    </div>

    <!-- Campos CEP e Busca -->
    <div class="cep-busca">
      <div class="cep-input-wrapper">
        <span>üìç</span>
        <input type="text" placeholder="Informar CEP" class="cep-input">
      </div>
      <div class="busca-input-wrapper">
        <span>üîç</span>
        <input type="text" placeholder="O que seu pet precisa?" class="busca-input">
        <button class="btn-busca">üîç</button>
      </div>
    </div>

    <!-- √çcones √† direita -->
    <div class="acoes-usuario">
      <a href="#"><img src="icone-carrinho.png" alt="Carrinho" width="20"> Carrinho</a>
      <a href="javascript:void(0)" id="btn-login"><i class="fas fa-user"></i> Entrar | Cadastrar</a>

      <!-- Dropdown Cliente (aparece ap√≥s login) -->
      <div class="dropdown" id="menu-logado" style="display:none;">
        <a href="javascript:void(0)">
          <img src="icone-user.png" alt="Usu√°rio" width="20" id="user-avatar">
          <span id="user-nome">Usu√°rio</span>
        </a>
        <ul class="submenu">
          <li><a href="#">Pedidos / Agendamentos</a></li>
          <li><a href="#">Consultas</a></li>
          <li><a href="#">Hist√≥rico</a></li>
          <li><a href="#">Configura√ß√µes</a></li>
          <li><a href="#" onclick="logout()">Sair</a></li>
        </ul>
      </div>
    </div>
  </div>
</header>

<!-- Modal de Login -->
<div class="modal" id="modal-login">
  <div class="modal-conteudo">
    <span class="fechar" onclick="fecharModal('modal-login')">&times;</span>
    <h3>Login</h3>
    <form id="form-login">
      <input type="email" id="login-email" placeholder="Email" required>
      <input type="password" id="login-senha" placeholder="Senha" required>
      <button type="submit">Entrar</button>
      <p>N√£o tem conta? <a href="#" id="link-cadastrar">Cadastrar</a></p>
      <p id="login-msg" style="color:red;"></p>
    </form>
  </div>
</div>

<!-- CATEGORIAS -->
<nav class="faixa-categorias">
  <ul>
    <li><a href="cachorro.html">Cachorro</a></li>
    <li><a href="gato.html">Gato</a></li>
    <li><a href="outros.html">Outros Pets</a></li>
    <li class="dropdown">
      <a href="servicos.html">Servi√ßos <i class="fas fa-caret-down"></i></a>
      <ul class="submenu">
        <li><a href="banho.html">Banho e Tosa</a></li>
        <li><a href="creche.html">Creche</a></li>
        <li><a href="hospedagem.html#hospedagem">Hospedagem</a></li>
        <li><a href="consultaveterinario.html#consulta">Consulta Veterin√°ria</a></li>
        <li><a href="dogwalker.html#dogwalker">Dog Walker</a></li>
        <li><a href="petsitter.html#petsitter">Pet Sitter</a></li>
        <li><a href="adestramento.html#adestramento">Adestramento</a></li>
      </ul>
    </li>
  </ul>
</nav>

<!-- BANNERS -->
<div class="swiper banner-swiper">
  <div class="swiper-wrapper">
    <div class="swiper-slide"><img src="img/banner1.png" alt="Banner 1" /></div>
    <div class="swiper-slide"><img src="img/banner2.png" alt="Banner 2" /></div>
    <div class="swiper-slide"><img src="img/banner3.png" alt="Banner 3" /></div>
  </div>
  <div class="swiper-pagination"></div>
</div>

<!-- BENEF√çCIOS -->
<section class="beneficios">
  <h2>Benef√≠cios pra voc√™</h2>
  <div class="beneficios-container">
    <div class="card-beneficio" onclick="abrirModal('modal-entregas')">
      <img src="img/entrega.svg" alt="Entregas" class="icone-beneficio" />
      <p><strong>Nossas<br>entregas</strong></p>
    </div>
    <div class="card-beneficio" onclick="abrirModal('modal-parceiros')">
      <img src="img/parceiros.svg" alt="Parcerias" class="icone-beneficio" />
      <p><strong>Parcerias com<br>servi√ßos locais</strong></p>
    </div>
    <div class="card-beneficio" onclick="abrirModal('modal-descontos')">
      <img src="img/desconto.svg" alt="Descontos" class="icone-beneficio" />
      <p><strong>Descontos<br>especiais</strong></p>
    </div>
    <div class="card-beneficio" onclick="abrirModal('modal-indique')">
      <img src="img/indique.svg" alt="Indique" class="icone-beneficio" />
      <p><strong>Indicou<br>ganhou</strong></p>
    </div>
    <div class="card-beneficio" onclick="abrirModal('modal-recompra')">
      <img src="img/recompra.svg" alt="Recompra" class="icone-beneficio" />
      <p><strong>Recompra<br>recorrente</strong></p>
    </div>
  </div>
</section>

<!-- MODAIS DE BENEF√çCIOS -->
<div class="modal" id="modal-entregas">
  <div class="modal-conteudo">
    <span class="fechar" onclick="fecharModal('modal-entregas')">&times;</span>
    <h3>Entregas</h3>
    <p>Entregamos em at√© 24h para regi√µes selecionadas. Consulte prazos e disponibilidade no seu CEP.</p>
  </div>
</div>

<div class="modal" id="modal-parceiros">
  <div class="modal-conteudo">
    <span class="fechar" onclick="fecharModal('modal-parceiros')">&times;</span>
    <h3>Conectando voc√™ aos melhores servi√ßos do bairro!</h3>
    <p>Fortalecemos la√ßos com parceiros locais para oferecer praticidade, confian√ßa e benef√≠cios exclusivos para voc√™ e seu pet.</p>
  </div>
</div>

<div class="modal" id="modal-descontos">
  <div class="modal-conteudo">
    <span class="fechar" onclick="fecharModal('modal-descontos')">&times;</span>
    <h3>Descontos Especiais</h3>
    <p>Comprando via <strong>Pix</strong> voc√™ ganha <strong>5% de desconto</strong>. Retirando em nossa loja ou com um parceiro pr√≥ximo, ganha <strong>mais 5%</strong>. Descontos v√°lidos para todos os clientes!</p>
  </div>
</div>

<div class="modal" id="modal-indique">
  <div class="modal-conteudo">
    <span class="fechar" onclick="fecharModal('modal-indique')">&times;</span>
    <h3>Indique e Ganhe</h3>
    <p>Indique amigos e ganhe b√¥nus. Seu amigo recebe desconto na primeira compra e voc√™ ganha um brinde ou cr√©dito.</p>
  </div>
</div>

<div class="modal" id="modal-recompra">
  <div class="modal-conteudo">
    <span class="fechar" onclick="fecharModal('modal-recompra')">&times;</span>
    <h3>Recompra Recorrente</h3>
    <p>Assine produtos para entrega autom√°tica com desconto e comodidade. Cancele quando quiser.</p>
  </div>
</div>

<!-- SERVI√áOS -->
<section class="servicos-agendamento">
  <div class="servico">
    <h3>Banho & Tosa</h3>
    <p>Ambiente seguro e profissionais experientes para o cuidado do seu pet.</p>
    <a href="banho.html" class="btn-agendar">Comprar agora</a>
  </div>
  <div class="servico">
    <h3>Creche Pet</h3>
    <p>Ideal para quem trabalha o dia todo: divers√£o e cuidado garantidos.</p>
    <a href="creche.html" class="btn-agendar">Agendar agora</a>
  </div>
  <div class="servico">
    <h3>Hospedagem</h3>
    <p>Finais de semana ou viagens? Seu pet fica em um lugar aconchegante.</p>
    <a href="hospedagem.html#hospedagem" class="btn-agendar">Agendar agora</a>
  </div>
  <div class="servico">
    <h3>Consultas Veterin√°rias</h3>
    <p>Profissionais confi√°veis para acompanhar a sa√∫de do seu pet.</p>
    <a href="consultaveterinario.html#consulta" class="btn-agendar">Agendar agora</a>
  </div>
</section>

<!-- PROMO√á√ïES -->
<section class="promocoes">
  <h2>Promo√ß√µes da Semana</h2>
  <div class="produtos-destaque">
    <div class="produto">
      <img src="https://via.placeholder.com/150" alt="Snack Natural Dog" />
      <h3>Snack Natural Dog 500g</h3>
      <p>De R$ 39,90 por</p>
      <span class="preco-promocao">R$ 29,90</span>
    </div>
    <div class="produto">
      <img src="https://via.placeholder.com/150" alt="Shampoo Neutro" />
      <h3>Shampoo Neutro 500ml</h3>
      <p>Leve 2 e pague 1</p>
      <span class="preco-promocao">R$ 18,90</span>
    </div>
    <div class="produto">
      <img src="https://via.placeholder.com/150" alt="Coleira Antipulgas" />
      <h3>Coleira Antipulgas</h3>
      <p>Desconto especial no Pix + Retirada</p>
      <span class="preco-promocao">R$ 64,90</span>
    </div>
  </div>
</section>

<!-- MAIS VENDIDOS -->
<section class="mais-vendidos">
  <h2>Itens mais vendidos</h2>
  <div class="produtos-destaque" id="mais-vendidos-container"></div>
</section>

<!-- MARCAS -->
<section class="marcas">
  <h2>Trabalhamos com as melhores marcas</h2>
  <div class="marcas-container" id="marcas-container"></div>
</section>

<!-- RODAP√â -->
<footer class="rodape-completo">
  <!-- Conte√∫do igual ao original -->
</footer>

<!-- SWIPER -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore-compat.js"></script>

<script>
  // Config Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyDVr6OOQRt2rB0kByInjqjdyoQCpnMAt7I",
    authDomain: "site-f6495.firebaseapp.com",
    projectId: "site-f6495",
    storageBucket: "site-f6495.firebasestorage.app",
    messagingSenderId: "230161402024",
    appId: "1:230161402024:web:462a911919ebf8a0809a9d",
    measurementId: "G-51G8XF6JH0"
  };
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  const db = firebase.firestore();
  const auth = firebase.auth();

  // MODAIS
  function abrirModal(id){ document.getElementById(id).style.display='block'; }
  function fecharModal(id){ document.getElementById(id).style.display='none'; }
  window.onclick = function(e){
    document.querySelectorAll('.modal').forEach(modal => { if(e.target===modal) modal.style.display='none'; });
  }

  // LOGIN
  document.getElementById('btn-login').addEventListener('click',()=>abrirModal('modal-login'));
  document.getElementById('form-login').addEventListener('submit', e=>{
    e.preventDefault();
    const email=document.getElementById('login-email').value;
    const senha=document.getElementById('login-senha').value;
    const msg=document.getElementById('login-msg');

    auth.signInWithEmailAndPassword(email,senha).then(userCredential=>{
      const user=userCredential.user;
      db.collection('usuarios').doc(user.uid).get().then(doc=>{
        if(doc.exists){
          const tipo=doc.data().tipo;
          document.getElementById('modal-login').style.display='none';
          document.getElementById('btn-login').style.display='none';
          document.getElementById('menu-logado').style.display='inline-block';
          document.getElementById('user-nome').textContent=doc.data().nome || "Usu√°rio";
        } else { msg.textContent='Usu√°rio sem perfil definido.' }
      });
    }).catch(err=>{ msg.textContent='Erro: '+err.message; });
  });

  function logout(){
    auth.signOut().then(()=>{
      document.getElementById('menu-logado').style.display='none';
      document.getElementById('btn-login').style.display='inline-block';
    });
  }

  // Carregar Mais Vendidos
  function carregarMaisVendidos(){
    const container=document.getElementById('mais-vendidos-container'); container.innerHTML='Carregando...';
    db.collection('maisVendidos').get().then(qs=>{
      container.innerHTML=''; qs.forEach(doc=>{
        const data=doc.data();
        container.innerHTML+=`
          <div class="produto">
            <img src="${data.imagem}" alt="${data.nome}" />
            <h3>${data.nome}</h3>
            <p>${data.descricao}</p>
            <span class="preco">${data.preco}</span>
          </div>`;
      });
    }).catch(err=>{ container.innerHTML='<p>Erro ao carregar produtos.</p>'; console.error(err); });
  }

  // Carregar Marcas
  function carregarMarcas(){
    const container=document.getElementById('marcas-container'); container.innerHTML='Carregando...';
    db.collection('marcas').get().then(qs=>{
      container.innerHTML=''; qs.forEach(doc=>{
        const data=doc.data();
        container.innerHTML+=`<img src="${data.logo}" alt="${data.nome}" />`;
      });
    }).catch(err=>{ container.innerHTML='<p>Erro ao carregar marcas.</p>'; console.error(err); });
  }

  window.addEventListener('DOMContentLoaded', ()=>{
    carregarMaisVendidos();
    carregarMarcas();

    // Verifica login ativo
    auth.onAuthStateChanged(user=>{
      if(user){
        db.collection('usuarios').doc(user.uid).get().then(doc=>{
          if(doc.exists){
            document.getElementById('btn-login').style.display='none';
            document.getElementById('menu-logado').style.display='inline-block';
            document.getElementById('user-nome').textContent=doc.data().nome;
          }
        });
      }
    });
  });

  // Swiper Banner
  const swiper=new Swiper('.banner-swiper',{
    loop:true, slidesPerView:1, spaceBetween:20,
    pagination:{el:'.swiper-pagination',clickable:true},
    autoplay:{delay:4000,disableOnInteraction:false}
  });
</script>

</body>
</html>
