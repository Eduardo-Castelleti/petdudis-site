<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pet Dudis - In√≠cio</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <style>
    /* Modal Login/Cadastro */
    .modal-login { display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background:rgba(0,0,0,0.6);}
    .modal-login-content { background:#fff; margin:10% auto; padding:20px; border-radius:8px; width:90%; max-width:400px; position:relative; }
    .modal-login-content h2 { text-align:center; margin-bottom:20px; }
    .modal-login-content input { width:100%; padding:10px; margin:5px 0; border:1px solid #ccc; border-radius:4px; }
    .modal-login-content button { width:100%; padding:10px; margin:10px 0; background:#6c63ff; color:#fff; border:none; border-radius:4px; cursor:pointer; }
    .modal-login-content .fechar { position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer; }
    .tab-login { display:flex; justify-content:space-around; margin-bottom:15px; cursor:pointer; }
    .tab-login div { padding:10px 20px; border-bottom:2px solid transparent; }
    .tab-login .ativo { border-bottom:2px solid #6c63ff; font-weight:bold; }
    .usuario-logado { display:flex; align-items:center; gap:10px; cursor:pointer; }
    .usuario-logado span { font-weight:bold; }
    .dropdown-usuario { display:none; position:absolute; background:#fff; border:1px solid #ccc; padding:10px; border-radius:4px; right:0; top:100%; min-width:120px; z-index:1001; }
    .usuario-logado:hover .dropdown-usuario { display:block; }
  </style>
</head>
<body>

<!-- CABE√áALHO -->
<header class="cabecalho">
  <div class="cabecalho-conteudo">
    <div class="logo-container">
      <img src="img/logo.png" alt="Pet Dudis" class="logo" />
    </div>

    <div class="cep-busca">
      <div class="cep-input-wrapper">
        <span>üìç</span>
        <input type="text" placeholder="Informar CEP" class="cep-input">
      </div>
      <div class="busca-input-wrapper">
        <span>üîç</span>
        <input type="text" placeholder="O que seu pet precisa?" class="busca-input">
        <button class="btn-busca">üîç</button>
      </div>
    </div>

    <div class="acoes-usuario">
      <a href="#"><i class="fas fa-sync-alt"></i> Recorr√™ncia</a>
      <a href="#"><i class="fas fa-box"></i> Pedidos</a>
      <span id="botao-login"><i class="fas fa-user"></i> Entrar | Cadastrar</span>
      <div class="usuario-logado" id="usuario-logado" style="display:none;">
        <span id="nome-usuario"></span>
        <div class="dropdown-usuario">
          <a href="#" id="btn-sair">Sair</a>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Seu restante do conte√∫do: categorias, banners, se√ß√µes, rodap√©‚Ä¶ mantido igual -->

<!-- Modal Login/Cadastro -->
<div class="modal-login" id="modal-login">
  <div class="modal-login-content">
    <span class="fechar" id="fechar-modal">&times;</span>
    <div class="tab-login">
      <div id="tab-entrar" class="ativo">Entrar</div>
      <div id="tab-cadastrar">Cadastrar</div>
    </div>

    <!-- Formul√°rio Entrar -->
    <div id="form-entrar">
      <input type="email" id="email-login" placeholder="Email" />
      <input type="password" id="senha-login" placeholder="Senha" />
      <button id="btn-login">Entrar</button>
    </div>

    <!-- Formul√°rio Cadastrar -->
    <div id="form-cadastrar" style="display:none;">
      <input type="text" id="nome-cadastro" placeholder="Nome completo" />
      <input type="tel" id="telefone-cadastro" placeholder="Telefone" />
      <input type="email" id="email-cadastro" placeholder="Email" />
      <input type="password" id="senha-cadastro" placeholder="Senha" />
      <button id="btn-cadastrar">Cadastrar</button>
    </div>
  </div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore-compat.js"></script>

<script>
  // Configura√ß√£o Firebase
  const firebaseConfig = {
    apiKey: "SEU_API_KEY",
    authDomain: "SEU_AUTH_DOMAIN",
    projectId: "SEU_PROJECT_ID",
    storageBucket: "SEU_STORAGE_BUCKET",
    messagingSenderId: "SEU_MESSAGING_ID",
    appId: "SEU_APP_ID",
    measurementId: "SEU_MEASUREMENT_ID"
  };

  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  const auth = firebase.auth();
  const db = firebase.firestore();

  // Modal
  const modalLogin = document.getElementById('modal-login');
  const botaoLogin = document.getElementById('botao-login');
  const fecharModal = document.getElementById('fechar-modal');
  const tabEntrar = document.getElementById('tab-entrar');
  const tabCadastrar = document.getElementById('tab-cadastrar');
  const formEntrar = document.getElementById('form-entrar');
  const formCadastrar = document.getElementById('form-cadastrar');
  const usuarioLogado = document.getElementById('usuario-logado');
  const nomeUsuario = document.getElementById('nome-usuario');
  const btnSair = document.getElementById('btn-sair');

  botaoLogin.onclick = () => modalLogin.style.display = 'block';
  fecharModal.onclick = () => modalLogin.style.display = 'none';
  window.onclick = e => { if(e.target==modalLogin) modalLogin.style.display='none'; }

  tabEntrar.onclick = () => { formEntrar.style.display='block'; formCadastrar.style.display='none'; tabEntrar.classList.add('ativo'); tabCadastrar.classList.remove('ativo'); }
  tabCadastrar.onclick = () => { formEntrar.style.display='none'; formCadastrar.style.display='block'; tabCadastrar.classList.add('ativo'); tabEntrar.classList.remove('ativo'); }

  // Cadastrar
  document.getElementById('btn-cadastrar').onclick = () => {
    const nome = document.getElementById('nome-cadastro').value;
    const telefone = document.getElementById('telefone-cadastro').value;
    const email = document.getElementById('email-cadastro').value;
    const senha = document.getElementById('senha-cadastro').value;

    if(!nome||!telefone||!email||!senha){ alert('Preencha todos os campos'); return; }

    auth.createUserWithEmailAndPassword(email, senha)
      .then(userCredential=>{
        const uid = userCredential.user.uid;
        db.collection('clientes').doc(uid).set({nome, telefone,email})
        .then(()=>{ alert('Cadastro realizado!'); modalLogin.style.display='none'; })
      })
      .catch(err=>{ alert(err.message); });
  }

  // Login
  document.getElementById('btn-login').onclick = () => {
    const email = document.getElementById('email-login').value;
    const senha = document.getElementById('senha-login').value;

    if(!email||!senha){ alert('Preencha todos os campos'); return; }

    auth.signInWithEmailAndPassword(email, senha)
      .then(userCredential=>{
        const uid = userCredential.user.uid;
        db.collection('clientes').doc(uid).get()
        .then(doc=>{
          if(doc.exists){
            nomeUsuario.textContent = doc.data().nome.split(' ')[0];
            botaoLogin.style.display='none';
            usuarioLogado.style.display='flex';
            modalLogin.style.display='none';
          }
        });
      })
      .catch(err=>{ alert(err.message); });
  }

  // Persist√™ncia de login
  auth.onAuthStateChanged(user=>{
    if(user){
      db.collection('clientes').doc(user.uid).get()
        .then(doc=>{
          if(doc.exists){
            nomeUsuario.textContent = doc.data().nome.split(' ')[0];
            botaoLogin.style.display='none';
            usuarioLogado.style.display='flex';
          }
        });
    } else {
      botaoLogin.style.display='inline-block';
      usuarioLogado.style.display='none';
    }
  });

  // Logout
  btnSair.onclick = e => { e.preventDefault(); auth.signOut(); }
</script>

</body>
</html>
