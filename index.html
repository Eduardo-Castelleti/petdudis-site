<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pet Dudis - In√≠cio</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <style>
    /* Header fixo */
    .cabecalho {position: sticky; top: 0; background: #fff; z-index: 1000;}
    /* √çcones categorias mais bonitos */
    .faixa-categorias li a {display: flex; align-items: center; gap: 6px;}
    /* Carrinho flutuante */
    .carrinho-flutuante {
      position: fixed; bottom: 20px; right: 20px; background: #6a1b9a; 
      color: #fff; padding: 14px; border-radius: 50%; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.3); font-size: 22px; cursor: pointer;
    }
    .carrinho-flutuante span {
      position: absolute; top: -5px; right: -5px; background: red; color: #fff;
      font-size: 12px; padding: 3px 6px; border-radius: 50%;
    }
    /* Modal Login */
    #modalLogin {
      display: none; 
      position: fixed; 
      inset: 0; 
      background: rgba(0,0,0,0.6); 
      justify-content: center; 
      align-items: center;
      z-index: 2000;
    }
    #modalLogin .modal-conteudo {
      background: #fff; 
      padding: 20px; 
      border-radius: 8px; 
      width: 320px; 
      position: relative;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
    #modalLogin h2 {
      margin-top: 0;
      margin-bottom: 20px;
      color: #6a1b9a;
      text-align: center;
    }
    #modalLogin input {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
    }
    #modalLogin button {
      width: 100%;
      padding: 12px;
      background: #6a1b9a;
      color: white;
      font-weight: bold;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    #modalLogin button:hover {
      background: #4a146b;
    }
    #modalLogin .fechar {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      font-weight: bold;
      color: #666;
      cursor: pointer;
    }
    /* Link cadastrar */
    #modalLogin .link-cadastrar {
      margin-top: 12px;
      font-size: 14px;
      text-align: center;
    }
    #modalLogin .link-cadastrar a {
      color: #6a1b9a;
      cursor: pointer;
      text-decoration: underline;
    }
  </style>
</head>
<body>

<!-- CABE√áALHO -->
<header class="cabecalho">
  <div class="cabecalho-conteudo">
    <div class="logo-container">
      <a href="index.html"><img src="logo.svg" alt="Logo Pet Dudis" class="logo"></a>
    </div>
    <div class="cep-busca">
      <div class="cep-input-wrapper">
        <span>üìç</span>
        <input type="text" placeholder="Informar CEP" class="cep-input">
      </div>
      <div class="busca-input-wrapper">
        <span>üîç</span>
        <input type="text" placeholder="O que seu pet precisa?" class="busca-input" id="campoBusca" />
        <button class="btn-busca" onclick="buscarProdutos()">üîç</button>
      </div>
    </div>
    <div class="acoes-usuario" id="menuUsuario">
      <a href="#" id="btnAbrirLogin"><i class="fas fa-user"></i> Entrar | Cadastrar</a>
    </div>
  </div>
</header>

<!-- Modal Login -->
<div id="modalLogin">
  <div class="modal-conteudo">
    <span class="fechar" id="fecharModal">&times;</span>
    <h2>Entrar na Pet Dudis</h2>
    <form id="formLogin">
      <input type="email" id="emailLogin" placeholder="Email" required autocomplete="username" />
      <input type="password" id="senhaLogin" placeholder="Senha" required autocomplete="current-password" />
      <button type="submit">Entrar</button>
    </form>
    <div class="link-cadastrar">
      Ainda n√£o tem conta? <a href="cadastro-cliente.html" target="_blank">Cadastre-se aqui</a>
    </div>
  </div>
</div>

<!-- CATEGORIAS -->
<nav class="faixa-categorias">
  <ul>
    <li><a href="cachorro.html"><i class="fas fa-dog"></i> Cachorro</a></li>
    <li><a href="gato.html"><i class="fas fa-cat"></i> Gato</a></li>
    <li><a href="outros.html"><i class="fas fa-paw"></i> Outros Pets</a></li>
    <li class="dropdown">
      <a href="servicos.html"><i class="fas fa-briefcase"></i> Servi√ßos <i class="fas fa-caret-down"></i></a>
      <ul class="submenu">
        <li><a href="banho.html">Banho e Tosa</a></li>
        <li><a href="creche.html">Creche</a></li>
        <li><a href="hospedagem.html#hospedagem">Hospedagem</a></li>
        <li><a href="consultaveterinario.html#consulta">Consulta Veterin√°ria</a></li>
        <li><a href="dogwalker.html#dogwalker">Dog Walker</a></li>
        <li><a href="petsitter.html#petsitter">Pet Sitter</a></li>
        <li><a href="adestramento.html#adestramento">Adestramento</a></li>
      </ul>
    </li>
  </ul>
</nav>

<!-- BANNERS -->
<div class="swiper banner-swiper">
  <div class="swiper-wrapper">
    <div class="swiper-slide"><a href="promocoes.html"><img src="img/banner1.png" alt="Banner 1" /></a></div>
    <div class="swiper-slide"><a href="banho.html"><img src="img/banner2.png" alt="Banner 2" /></a></div>
    <div class="swiper-slide"><a href="clube.html"><img src="img/banner3.png" alt="Banner 3" /></a></div>
  </div>
  <div class="swiper-button-next"></div>
  <div class="swiper-button-prev"></div>
  <div class="swiper-pagination"></div>
</div>

<!-- BENEF√çCIOS -->
<section class="beneficios">
  <h2>Benef√≠cios pra voc√™</h2>
  <div class="beneficios-container">
    <div class="card-beneficio">
      <img src="img/entrega.svg" alt="Entregas" />
      <p><strong>Entregas r√°pidas</strong></p>
      <a href="entregas.html" class="btn-agendar">Saiba mais</a>
    </div>
    <div class="card-beneficio">
      <img src="img/parceiros.svg" alt="Parcerias" />
      <p><strong>Parcerias locais</strong></p>
      <a href="servicos.html" class="btn-agendar">Ver servi√ßos</a>
    </div>
    <div class="card-beneficio">
      <img src="img/desconto.svg" alt="Descontos" />
      <p><strong>Descontos especiais</strong></p>
      <a href="promocoes.html" class="btn-agendar">Ver promo√ß√µes</a>
    </div>
    <div class="card-beneficio">
      <img src="img/indique.svg" alt="Indique" />
      <p><strong>Indique e ganhe</strong></p>
      <a href="indique.html" class="btn-agendar">Participar</a>
    </div>
    <div class="card-beneficio">
      <img src="img/recompra.svg" alt="Recompra" />
      <p><strong>Recompra recorrente</strong></p>
      <a href="recorrencia.html" class="btn-agendar">Assinar</a>
    </div>
  </div>
</section>

<!-- SERVI√áOS -->
<section class="servicos-agendamento">
  <div class="servico">
    <h3>Banho & Tosa</h3>
    <p>Ambiente seguro e profissionais experientes.</p>
    <a href="banho.html" class="btn-agendar">Agendar agora</a>
  </div>
  <div class="servico">
    <h3>Creche Pet</h3>
    <p>Divers√£o e cuidado garantidos.</p>
    <a href="creche.html" class="btn-agendar">Agendar agora</a>
  </div>
  <div class="servico">
    <h3>Hospedagem</h3>
    <p>Seu pet em um lugar aconchegante.</p>
    <a href="hospedagem.html#hospedagem" class="btn-agendar">Agendar agora</a>
  </div>
  <div class="servico">
    <h3>Consultas Veterin√°rias</h3>
    <p>Profissionais confi√°veis para sa√∫de do seu pet.</p>
    <a href="consultaveterinario.html#consulta" class="btn-agendar">Agendar agora</a>
  </div>
</section>

<!-- PROMO√á√ïES DIN√ÇMICAS -->
<section class="promocoes">
  <h2>Promo√ß√µes da Semana</h2>
  <div class="produtos-destaque" id="listaPromocoes"></div>
</section>

<!-- MAIS VENDIDOS -->
<section class="mais-vendidos">
  <h2>Itens mais vendidos</h2>
  <div class="produtos-destaque" id="listaMaisVendidos"></div>
</section>

<!-- MARCAS -->
<section class="marcas">
  <h2>Trabalhamos com as melhores marcas</h2>
  <div class="marcas-container">
    <img src="marcas/specialdog.png" alt="Special Dog" />
    <img src="marcas/premierpet.png" alt="Premier Pet" />
    <img src="marcas/nexgard.png" alt="Nexgard" />
    <img src="marcas/royalcanin.png" alt="Royal Canin" />
    <img src="marcas/buddytoys.png" alt="Buddy Toys" />
  </div>
</section>

<!-- RODAP√â -->
<footer class="rodape-completo">...</footer>

<!-- Carrinho flutuante -->
<div class="carrinho-flutuante" onclick="window.location.href='carrinho.html'">
  <i class="fas fa-shopping-cart"></i>
  <span id="qtdCarrinho">0</span>
</div>

<!-- JS Swiper -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
  const swiper = new Swiper('.banner-swiper', {
    loop: true,
    pagination: { el: '.swiper-pagination', clickable: true },
    navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
    autoplay: { delay: 4000 }
  });
</script>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    // sua configura√ß√£o aqui
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // Controle do modal
  const modalLogin = document.getElementById('modalLogin');
  const btnAbrirLogin = document.getElementById('btnAbrirLogin');
  const fecharModal = document.getElementById('fecharModal');

  btnAbrirLogin.addEventListener('click', e => {
    e.preventDefault();
    modalLogin.style.display = 'flex';
  });

  fecharModal.addEventListener('click', () => {
    modalLogin.style.display = 'none';
  });

  window.addEventListener('click', e => {
    if (e.target === modalLogin) {
      modalLogin.style.display = 'none';
    }
  });

  // Login Firebase
  document.getElementById('formLogin').addEventListener('submit', e => {
    e.preventDefault();
    const email = document.getElementById('emailLogin').value;
    const senha = document.getElementById('senhaLogin').value;

    auth.signInWithEmailAndPassword(email, senha)
      .then(({ user }) => {
        // Busca role no Firestore
        db.collection('usuarios').doc(user.uid).get()
          .then(doc => {
            if (doc.exists) {
              const role = doc.data().role || 'cliente';
              modalLogin.style.display = 'none';

              if(role === 'funcionario') {
                window.location.href = 'funcionario.html';
              } else if(role === 'parceiro') {
                window.location.href = 'parceiro.html';
              } else {
                window.location.href = 'cliente.html';
              }
            } else {
              alert('Usu√°rio sem perfil definido. Contate o suporte.');
              auth.signOut();
            }
          })
          .catch(() => {
            alert('Erro ao buscar perfil do usu√°rio.');
            auth.signOut();
          });
      })
      .catch(error => {
        alert('Erro no login: ' + error.message);
      });
  });

  // Atualiza menu ap√≥s login
  auth.onAuthStateChanged(user => {
    const menu = document.getElementById('menuUsuario');
    if (user) {
      menu.innerHTML = `<a href="cliente.html"><i class="fas fa-user-circle"></i> Ol√°, ${user.displayName || user.email}</a>`;
    } else {
      menu.innerHTML = `<a href="#" id="btnAbrirLogin"><i class="fas fa-user"></i> Entrar | Cadastrar</a>`;
      document.getElementById('btnAbrirLogin').addEventListener('click', e => {
        e.preventDefault();
        modalLogin.style.display = 'flex';
      });
    }
  });

  // Carregar promo√ß√µes do Firestore
  db.collection('promocoes').get().then(snapshot => {
    let html = '';
    snapshot.forEach(doc => {
      let p = doc.data();
      html += `<div class="produto">
        <img src="${p.imagem}" alt="${p.nome}" />
        <h3>${p.nome}</h3>
        <p>${p.descricao}</p>
        <span class="preco-promocao">R$ ${p.preco}</span>
      </div>`;
    });
    document.getElementById('listaPromocoes').innerHTML = html;
  });

  // Carregar mais vendidos
  db.collection('produtos').where('maisVendido', '==', true).get().then(snapshot => {
    let html = '';
    snapshot.forEach(doc => {
      let p = doc.data();
      html += `<div class="produto">
        <img src="${p.imagem}" alt="${p.nome}" />
        <h3>${p.nome}</h3>
        <p>${p.descricao}</p>
        <span class="preco">R$ ${p.preco}</span>
      </div>`;
    });
    document.getElementById('listaMaisVendidos').innerHTML = html;
  });

  // Busca de produtos
  function buscarProdutos() {
    const termo = document.getElementById('campoBusca').value;
    if (termo.trim()) {
      window.location.href = `resultados.html?q=${encodeURIComponent(termo)}`;
    }
  }
</script>

</body>
</html>
